<html>

<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript">

        // Load the Visualization API and the piechart package.
        google.charts.load('current', { 'packages': ['corechart'] });

        // Set a callback to run when the Google Visualization API is loaded.
        google.charts.setOnLoadCallback(drawAllCharts);

        function drawAllCharts() {
            drawChart("ScottPlot");
            drawChart("ScottPlot.WPF");
            drawChart("ScottPlot.WinForms");
            drawChart("ScottPlot.Avalonia");
            drawChart("FftSharp");
            drawChart("Spectrogram");
        }

        function drawChart(packageName) {
            var jsonData = $.ajax({
                url: `https://swhardendev.z13.web.core.windows.net/packagestats/${packageName}.json`,
                dataType: "json",
                async: false
            }).responseText;
            rowData = JSON.parse(jsonData);

            // Create our data table out of JSON data loaded from server.
            var data = new google.visualization.DataTable();
            data.addColumn('datetime', 'X');
            data.addColumn('number', 'Downloads');
            for (var i = 0; i < rowData.length; i++) {
                var epochTime = Date.parse(rowData[i][0]);
                var x = new Date(epochTime);
                var y = rowData[i][1];
                data.addRow([x, y]);
            }

            var options = {
            };

            var chart = new google.visualization.SteppedAreaChart(document.getElementById(`chart_${packageName}`));
            chart.draw(data, {
                title: packageName,
                height: 600,
                fontSize: 16,
                legend: { position: 'none' }
            });
        }

    </script>
</head>

<body>
    <div id="chart_ScottPlot"></div>
    <div id="chart_ScottPlot.WPF"></div>
    <div id="chart_ScottPlot.WinForms"></div>
    <div id="chart_ScottPlot.Avalonia"></div>
    <div id="chart_FftSharp"></div>
    <div id="chart_Spectrogram"></div>
</body>

</html>